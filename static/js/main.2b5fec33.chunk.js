(this.webpackJsonptrello=this.webpackJsonptrello||[]).push([[0],{37:function(t,e,a){},43:function(t,e,a){},44:function(t,e,a){},46:function(t,e,a){},47:function(t,e,a){},48:function(t,e,a){},49:function(t,e,a){},51:function(t,e,a){},60:function(t,e,a){},61:function(t,e,a){"use strict";a.r(e);var n=a(0),r=a.n(n),i=a(17),c=a.n(i),d=(a(37),a(9)),s=a(5),l=a(6),o=a(8),u=a(7),p=(a(43),a(44),a(15)),j=a(3),b=a(4),h=a.n(b),g=a(14),O=(a(46),a(47),a(48),a(19)),v=(a(49),a(1)),f=function(t){var e=t.handleSave,a=t.saveLabel,n=t.handleDelete,r=t.handleCancel;return Object(v.jsxs)("div",{className:"Edit-Buttons",children:[Object(v.jsx)("div",{tabIndex:"0",className:"Edit-Button",style:{backgroundColor:"#5aac44"},onClick:e,children:a}),n&&Object(v.jsx)("div",{tabIndex:"0",className:"Edit-Button",style:{backgroundColor:"#EA2525",marginLeft:0},onClick:n,children:"Delete"}),Object(v.jsx)("div",{tabIndex:"0",className:"Edit-Button-Cancel",onClick:r,children:Object(v.jsx)("ion-icon",{name:"close"})})]})},x=function(t){Object(o.a)(a,t);var e=Object(u.a)(a);function a(){var t;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))).state={text:t.props.text||"",title:t.props.title||""},t.handleChangeText=function(e){return t.setState({text:e.target.value})},t.handleChangeTitle=function(e){return t.setState({title:e.target.value})},t.onEnter=function(e){var a=t.state,n=a.text,r=a.title;console.log(e),13===e.keyCode&&(e.preventDefault(),console.log(r),t.props.onSave(n,r))},t}return Object(l.a)(a,[{key:"render",value:function(){var t=this.state,e=t.text,a=t.title,n=this.props,r=n.onSave,i=n.onCancel,c=n.onDelete,d=n.adding;return Object(v.jsxs)("div",{className:"Edit-Card",children:[Object(v.jsxs)("div",{className:"Card",children:[Object(v.jsx)(O.a,{autoFocus:!0,className:"Edit-Card-Textarea",placeholder:"Enter the title for this card...",value:a,onChange:this.handleChangeTitle,onKeyDown:this.onEnter}),Object(v.jsx)(O.a,{autoFocus:!0,className:"Edit-Card-Textarea",placeholder:"Enter the text for this card...",value:e,onChange:this.handleChangeText,onKeyDown:this.onEnter})]}),Object(v.jsx)(f,{handleSave:function(){return r(e,a)},saveLabel:d?"Add card":"Save",handleDelete:c,handleCancel:i})]})}}]),a}(n.Component),C=function(t){Object(o.a)(a,t);var e=Object(u.a)(a);function a(){var t;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))).state={hover:!1,editing:!1},t.startHover=function(){return t.setState({hover:!0})},t.endHover=function(){return t.setState({hover:!1})},t.startEditing=function(){return t.setState({hover:!1,editing:!0,text:t.props.card.text,title:t.props.card.title})},t.endEditing=function(){return t.setState({hover:!1,editing:!1})},t.editCard=function(){var e=Object(g.a)(h.a.mark((function e(a,n){var r,i,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=t.props,i=r.card,c=r.dispatch,t.endEditing(),console.log("Check dispatch card",i.title),c({type:"CHANGE_CARD_TEXT",payload:{cardId:i._id,cardText:a,cardTitle:n}});case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),t.deleteCard=Object(g.a)(h.a.mark((function e(){var a,n,r,i;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=t.props,n=a.listId,r=a.card,i=a.dispatch,window.confirm("Are you sure to delete this card?")&&i({type:"DELETE_CARD",payload:{cardId:r._id,listId:n}});case 2:case"end":return e.stop()}}),e)}))),t}return Object(l.a)(a,[{key:"render",value:function(){var t=this,e=this.props,a=e.card,n=e.index,r=this.state;r.hover;return r.editing?Object(v.jsx)(x,{title:a.title,text:a.text,onSave:this.editCard,onDelete:this.deleteCard,onCancel:this.endEditing}):Object(v.jsx)(p.b,{draggableId:a._id,index:n,children:function(e,n){return Object(v.jsxs)("div",Object(j.a)(Object(j.a)(Object(j.a)({ref:e.innerRef},e.draggableProps),e.dragHandleProps),{},{className:"Card",onMouseEnter:t.startHover,onMouseLeave:t.endHover,children:[Object(v.jsx)("div",{className:"Card-Icons",children:Object(v.jsx)("div",{className:"Card-Icon",onClick:t.startEditing,children:Object(v.jsx)("ion-icon",{name:"create"})})}),Object(v.jsx)("p",{children:a.title}),a.text]}))}})}}]),a}(n.Component),y=Object(d.b)((function(t,e){return{card:t.cardsById[e.cardId]}}))(C),I=(a(51),function(t){Object(o.a)(a,t);var e=Object(u.a)(a);function a(){var t;Object(s.a)(this,a);for(var n=arguments.length,i=new Array(n),c=0;c<n;c++)i[c]=arguments[c];return(t=e.call.apply(e,[this].concat(i))).ref=r.a.createRef(),t.state={toogleEditing:!1},t.onEnter=function(e){13===e.keyCode&&(e.preventDefault(),t.setState({toogleEditing:!1}),t.props.saveList())},t.handleClick=function(e){var a=t.ref.current;(console.log(a,e),a.contains(e.target))?console.log("return from edit"):t.state.toogleEditing?(t.setState({toogleEditing:!1}),t.props.onClickOutside()):t.setState({toogleEditing:!0})},t}return Object(l.a)(a,[{key:"componentDidMount",value:function(){console.log("editlist"),document.addEventListener("click",this.handleClick,!1)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("click",this.handleClick,!1)}},{key:"render",value:function(){var t=this.props,e=t.title,a=t.handleChangeTitle,n=t.deleteList;return Object(v.jsxs)("div",{className:"List-Title-Edit",ref:this.ref,children:[Object(v.jsx)(O.a,{autoFocus:!0,className:"List-Title-Textarea",placeholder:"Enter list title...",value:e,onChange:a,onKeyDown:this.onEnter,style:{width:n?220:245}}),Object(v.jsx)("div",{className:"Card-Icon",onClick:n,children:Object(v.jsx)("ion-icon",{name:"trash"})})]})}}]),a}(n.Component)),T=a(12),E=a.n(T),L=function(t){Object(o.a)(a,t);var e=Object(u.a)(a);function a(){var t;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))).state={editingTitle:!1,title:t.props.list.title,addingCard:!1},t.toggleAddingCard=function(){return t.setState({addingCard:!t.state.addingCard})},t.addCard=function(){var e=Object(g.a)(h.a.mark((function e(a,n){var r,i,c,d;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=t.props,i=r.listId,c=r.dispatch,t.toggleAddingCard(),d=E.a.generate(),c({type:"ADD_CARD",payload:{cardText:a,cardId:d,listId:i,cardTitle:n}});case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),t.toggleEditingTitle=function(){return t.setState({editingTitle:!t.state.editingTitle})},t.handleChangeTitle=function(e){return t.setState({title:e.target.value})},t.editListTitle=Object(g.a)(h.a.mark((function e(){var a,n,r,i;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=t.props,n=a.listId,r=a.dispatch,i=t.state.title,console.log("editing list",t.props),t.toggleEditingTitle(),r({type:"CHANGE_LIST_TITLE",payload:{listId:n,listTitle:i}});case 5:case"end":return e.stop()}}),e)}))),t.deleteList=Object(g.a)(h.a.mark((function e(){var a,n,r,i;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=t.props,n=a.listId,r=a.list,i=a.dispatch,console.log("deleting list"),window.confirm("Are you sure to delete this list?")&&i({type:"DELETE_LIST",payload:{listId:n,cards:r.cards}});case 3:case"end":return e.stop()}}),e)}))),t}return Object(l.a)(a,[{key:"render",value:function(){var t=this,e=this.props,a=e.list,n=e.index,r=this.state,i=r.editingTitle,c=r.addingCard,d=r.title;return Object(v.jsx)(p.b,{draggableId:a._id,index:n,children:function(e,n){return Object(v.jsxs)("div",Object(j.a)(Object(j.a)(Object(j.a)({ref:e.innerRef},e.draggableProps),e.dragHandleProps),{},{className:"List",children:[i?Object(v.jsx)(I,{list:a,title:d,handleChangeTitle:t.handleChangeTitle,saveList:t.editListTitle,onClickOutside:t.editListTitle,deleteList:t.deleteList}):Object(v.jsx)("div",{className:"List-Title",onClick:t.toggleEditingTitle,children:a.title}),Object(v.jsx)(p.c,{droppableId:a._id,children:function(e,n){return Object(v.jsxs)("div",{ref:e.innerRef,className:"Lists-Cards",children:[a.cards&&a.cards.map((function(t,e){return Object(v.jsx)(y,{cardId:t,index:e,listId:a._id},t)})),e.placeholder,c?Object(v.jsx)(x,{onSave:t.addCard,onCancel:t.toggleAddingCard,adding:!0}):Object(v.jsxs)("div",{className:"Toggle-Add-Card",onClick:t.toggleAddingCard,children:[Object(v.jsx)("ion-icon",{name:"add"})," Add a card"]})]})}})]}))}})}}]),a}(n.Component),m=Object(d.b)((function(t,e){return{list:t.listsById[e.listId]}}))(L),A=(a(60),function(t){Object(o.a)(a,t);var e=Object(u.a)(a);function a(){var t;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))).state={title:""},t.handleChangeTitle=function(e){return t.setState({title:e.target.value})},t.createList=Object(g.a)(h.a.mark((function e(){var a,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=t.state.title,n=t.props.dispatch,t.props.toggleAddingList(),n({type:"ADD_LIST",payload:{listId:E.a.generate(),listTitle:a}});case 4:case"end":return e.stop()}}),e)}))),t}return Object(l.a)(a,[{key:"render",value:function(){var t=this.props.toggleAddingList,e=this.state.title;return Object(v.jsxs)("div",{className:"Add-List-Editor",children:[Object(v.jsx)(I,{title:e,handleChangeTitle:this.handleChangeTitle,onClickOutside:t,saveList:this.createList}),Object(v.jsx)(f,{handleSave:this.createList,saveLabel:"Add list",handleCancel:t})]})}}]),a}(n.Component)),D=Object(d.b)()(A),S=function(t){Object(o.a)(a,t);var e=Object(u.a)(a);function a(){var t;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))).state={addingList:!1},t.toggleAddingList=function(){return t.setState({addingList:!t.state.addingList})},t.handleDragEnd=function(e){var a=e.source,n=e.destination,r=e.type;if(n){var i=t.props.dispatch;"COLUMN"!==r?a.index===n.index&&a.droppableId===n.droppableId||i({type:"MOVE_CARD",payload:{sourceListId:a.droppableId,destListId:n.droppableId,oldCardIndex:a.index,newCardIndex:n.index}}):a.index!==n.index&&i({type:"MOVE_LIST",payload:{oldListIndex:a.index,newListIndex:n.index}})}},t}return Object(l.a)(a,[{key:"render",value:function(){var t=this,e=this.props.board,a=this.state.addingList;return Object(v.jsx)(p.a,{onDragEnd:this.handleDragEnd,children:Object(v.jsx)(p.c,{droppableId:"board",direction:"horizontal",type:"COLUMN",children:function(n,r){return Object(v.jsxs)("div",{className:"Board",ref:n.innerRef,children:[e.lists.map((function(t,e){return Object(v.jsx)(m,{listId:t,index:e},t)})),n.placeholder,Object(v.jsx)("div",{className:"Add-List",children:a?Object(v.jsx)(D,{toggleAddingList:t.toggleAddingList}):Object(v.jsxs)("div",{onClick:t.toggleAddingList,className:"Add-List-Button",children:[Object(v.jsx)("ion-icon",{name:"add"})," Add a list"]})})]})}})})}}]),a}(n.Component),_=Object(d.b)((function(t){return{board:t.board}}))(S),k=function(t){Object(o.a)(a,t);var e=Object(u.a)(a);function a(){return Object(s.a)(this,a),e.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return Object(v.jsxs)("div",{className:"App",children:[Object(v.jsx)("div",{className:"Header",children:"Trello"}),Object(v.jsx)(_,{})]})}}]),a}(n.Component),w=function(t){t&&t instanceof Function&&a.e(3).then(a.bind(null,62)).then((function(e){var a=e.getCLS,n=e.getFID,r=e.getFCP,i=e.getLCP,c=e.getTTFB;a(t),n(t),r(t),i(t),c(t)}))},N=a(28),R=a(29),B=a(10),H=a(22),M=a(27),F=a(11),P=a(32),G=a.n(P);var J=Object(F.c)({board:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{lists:[]},e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"ADD_LIST":var a=e.payload.listId;return{lists:[].concat(Object(M.a)(t.lists),[a])};case"MOVE_LIST":var n=e.payload,r=n.oldListIndex,i=n.newListIndex,c=Array.from(t.lists),d=c.splice(r,1),s=Object(H.a)(d,1),l=s[0];return c.splice(i,0,l),{lists:c};case"DELETE_LIST":var o=e.payload.listId,u=function(t){return t!==o},p=t.lists.filter(u);return{lists:p};default:return t}},listsById:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"ADD_LIST":var a=e.payload,n=a.listId,r=a.listTitle;return Object(j.a)(Object(j.a)({},t),{},Object(B.a)({},n,{_id:n,title:r,cards:[]}));case"CHANGE_LIST_TITLE":var i=e.payload,c=i.listId,d=i.listTitle;return console.log("CHANGE_LIST_TITLE ACtion",c,d),Object(j.a)(Object(j.a)({},t),{},Object(B.a)({},c,Object(j.a)(Object(j.a)({},t[c]),{},{title:d})));case"DELETE_LIST":var s=e.payload.listId,l=(t[s],Object(N.a)(t,[s].map(R.a)));return l;case"ADD_CARD":var o=e.payload,u=o.listId,p=o.cardId;return Object(j.a)(Object(j.a)({},t),{},Object(B.a)({},u,Object(j.a)(Object(j.a)({},t[u]),{},{cards:[].concat(Object(M.a)(t[u].cards),[p])})));case"MOVE_CARD":var b,h=e.payload,g=h.oldCardIndex,O=h.newCardIndex,v=h.sourceListId,f=h.destListId;if(v===f){var x=Array.from(t[v].cards),C=x.splice(g,1),y=Object(H.a)(C,1),I=y[0];return x.splice(O,0,I),Object(j.a)(Object(j.a)({},t),{},Object(B.a)({},v,Object(j.a)(Object(j.a)({},t[v]),{},{cards:x})))}var T=Array.from(t[v].cards),E=T.splice(g,1),L=Object(H.a)(E,1),m=L[0],A=Array.from(t[f].cards);return A.splice(O,0,m),Object(j.a)(Object(j.a)({},t),{},(b={},Object(B.a)(b,v,Object(j.a)(Object(j.a)({},t[v]),{},{cards:T})),Object(B.a)(b,f,Object(j.a)(Object(j.a)({},t[f]),{},{cards:A})),b));case"DELETE_CARD":var D=e.payload,S=D.cardId,_=D.listId,k=function(t){return t!==S};return Object(j.a)(Object(j.a)({},t),{},Object(B.a)({},_,Object(j.a)(Object(j.a)({},t[_]),{},{cards:t[_].cards.filter(k)})));default:return t}},cardsById:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"ADD_CARD":var a=e.payload,n=a.cardText,r=a.cardId,i=a.cardTitle;return Object(j.a)(Object(j.a)({},t),{},Object(B.a)({},r,{text:n,_id:r,title:i}));case"CHANGE_CARD_TEXT":var c=e.payload,d=c.cardText,s=c.cardId,l=c.cardTitle;return Object(j.a)(Object(j.a)({},t),{},Object(B.a)({},s,Object(j.a)(Object(j.a)({},t[s]),{},{text:d,title:l})));case"DELETE_CARD":var o=e.payload.cardId,u=(t[o],Object(N.a)(t,[o].map(R.a)));return u;case"DELETE_LIST":var p=e.payload.cards;return Object.keys(t).filter((function(t){return!p.includes(t)})).reduce((function(e,a){return Object(j.a)(Object(j.a)({},e),{},Object(B.a)({},a,t[a]))}),{});default:return t}}}),V=function(){try{var t=localStorage.getItem("state");if(null===t)return;return JSON.parse(t)}catch(e){return}}(),K=Object(F.e)(J,V);K.subscribe(G()((function(){!function(t){console.log(t);try{var e=JSON.stringify(t);localStorage.setItem("state",e)}catch(a){console.log(t)}}(K.getState())}),1e3)),console.log(K.getState()),K.getState().board.lists.length||(console.log("SEED"),function(t){console.log("Insert first list");var e=E.a.generate();t.dispatch({type:"ADD_LIST",payload:{listId:e,listTitle:"Click here to edit and delete list"}}),t.dispatch({type:"ADD_CARD",payload:{listId:e,cardId:E.a.generate(),cardText:"Text 1",cardTitle:"Title 1"}}),t.dispatch({type:"ADD_CARD",payload:{listId:e,cardId:E.a.generate(),cardText:"Second card",cardTitle:"Title 2"}}),console.log("Insert second list");var a=E.a.generate();t.dispatch({type:"ADD_LIST",payload:{listId:a,listTitle:"Second list"}}),t.dispatch({type:"ADD_CARD",payload:{listId:a,cardId:E.a.generate(),cardText:"Card 1",cardTitle:"Title 1"}}),t.dispatch({type:"ADD_CARD",payload:{listId:a,cardId:E.a.generate(),cardText:"Card 2",cardTitle:"Title 2"}})}(K));var U=K;c.a.render(Object(v.jsx)(d.a,{store:U,children:Object(v.jsx)(k,{})}),document.getElementById("root")),w()}},[[61,1,2]]]);
//# sourceMappingURL=main.2b5fec33.chunk.js.map